VAST-TOOLS
==========

Summary
-------
VAST-TOOLS is a toolset for profiling alternative splicing events in RNA-Seq data. 

Requirements
------------

VAST-TOOLS requires the following software:
    * bowtie 1.0.0 (Langmead et al., 2009), http://bowtie-bio.sourceforge.net/index.shtml
    * R 3.0.1 or higher, with the following packages installed:
        * optparse
        * RColorBrewer
        * reshape2
        * ggplot2
    * Perl 5.10.1 or higher

VAST-TOOLS also requires species-specific library files (collectively known as
VASTDB), which must be downloaded separately. VASTDB consists of pre-made Bowtie
indices, annotation, and template files.

Installation
------------
The VAST-TOOLS software package can be downloaded, unpacked and run as is. It
does not require any additional installation steps.

VASTDB must be downloaded separately and can be saved in the VAST-TOOLS 
directory, or in an external location. If the latter, the path of VASTDB must be
supplied to `vast-tools` or alternatively, a symbolic link can be created in the
root of VAST-TOOLS directory. By default, VAST-TOOLS looks for VASTDB
inside its own directory (e.g. `~/vast-tools/VASTDB`).

~~~~
> cd ~/vast-tools/
> ln -s <path to VASTDB> VASTDB
~~~~

Usage
-----

VAST-TOOLS contains four main sub-commands: align, combine, diff, and plot. The
following provides a quick introduction on how to run the tool:

**Alignment:**
~~~~
> vast-tools align input1.fq.gz -sp Hsa -readLen 158 -o outputdir
> vast-tools align input2.fq.gz -sp Hsa -readLen 158 -o outputdir
~~~~

#TODO From MI - need to revise
fastq_file can be compressed or uncompressed. It MUST have this name format: Sample-readlength.fq
Only underscores (\"_\") are allowed in the Sample name. No dashes, dots, spaces, etc.
If running with the paired end option (\"\-PE\"), they must be called: Sample_1-length.fq Sample_2-length.fq
The process can be started with \"genome substracted\" samples if a Sample-lenght-e.fq is used
Species implemented: Human (hg19) or Mouse (mm9)
For expression analyses: -expr (PSIs plus cRPKM calculations) OR -exprONLY (only cRPKMs) OR none
For trimming, it can be trimmed once (at 3') or twice (in an overlapping manner).
If nothing is provided, the program will decide based on the length of the reads (Default is twice if length>50)
-c N: Number of threds used when running bowtie (default=1).
Recommended to allow at least 15GB of RAM (~10GB are needed for mapping to the genome). For large files (~1 lane), >25GB
###

**Combining Results:**
#TODO description

~~~~
> vast-tools combine -o outputdir
~~~~

**Differential Splicing Analysis**
#TODO description

~~~~
> vast-tools diff -a sampleA_rep1@sampleA_rep2 -b sampleB_rep1@sampleB_rep2 -o outputdir --filter > significant_events.tab
~~~~

**Plotting:**

VAST-TOOLS comes with a plotting script written in R.
The input format follows the same format from the "combine" step described
above. The output is a pdf of scatterplots (one per AS event) of PSI values.
To execute from VAST-TOOLS, use the subcommand "plot":

~~~~
> vast-tools plot significant_events.tab
~~~~

It is recommended to filter the input file to a subset of events of interest
before plotting, such as those obtained from "vast-tools diff". Otherwise, the
resulting pdf file will be very large.

Questions 
---------
Send questions to mirimia@gmail.com.

Please send the smallest example necessary to the in order to reproduce the error. 

Issues
------
Please report all bugs and issues using the issue tracker on GitHub (url
coming soon!)

Authors
-------
Manuel Irimia
Nuno Barbosa-Morais
Ulrich Braunschweig
Sandy Pan
Kevin Ha
Tim Sterne-Weiler

Citation
--------
Coming soon...

References
----------

Langmead, B., Trapnell, C., Pop, M., Salzberg, S.L., 2009. Ultrafast and
memory-efficient alignment of short DNA sequences to the human genome. Genome
Biol. 10, R25.
